const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/66_NGtvh.js","../chunks/BVWwdZHL.js","../chunks/C-A09_gl.js"])))=>i.map(i=>d[i]);
import{_ as rs}from"../chunks/Dp1pzeXC.js";import"../chunks/Bzak7iHL.js";import"../chunks/B8zN5-cI.js";import{o as Ct}from"../chunks/Dh_dsFNd.js";import{h as ns,j as is,aa as cs,ah as a,ay as xt,az as vs,b as y,f as ye,ab as f,a as z,ac as ds,u as d,a7 as t,g as us,ae as r,af as v,ag as o,ad as l,n as we,aA as ct,aB as Ce,c as bs}from"../chunks/BVWwdZHL.js";import{e as k,s as D}from"../chunks/B8z2uk3R.js";import{i as R}from"../chunks/CcW0RJpt.js";import{e as F,s as ps,i as vt,p as xe}from"../chunks/JKVYAIOI.js";import{r as dt}from"../chunks/DkRgT0vW.js";import{t as qt,s as Nt,a as ms,q as hs,f as Bt}from"../chunks/DgPLb8Gn.js";import{b as Z}from"../chunks/Dtqw5nwn.js";import{t as _s,l as Xt,a as qe,c as fs,b as zs,d as ut,e as gs,f as ks,g as ys,u as ws,r as Cs}from"../chunks/66_NGtvh.js";import{i as xs}from"../chunks/DiBsknOO.js";import{p as qs,s as Ls,a as Yt}from"../chunks/DIjW8BnX.js";import{s as Ms}from"../chunks/DwOm6FZI.js";function As(It,st,bt,Lt,A){var H;ns&&is();var E=(H=st.$$slots)==null?void 0:H[bt],G=!1;E===!0&&(E=st.children,G=!0),E===void 0||E(It,G?()=>Lt:Lt)}var Es=y('<div class="particle svelte-18bsz5t"></div>'),Ss=y('<div class="welcome-screen svelte-18bsz5t"><div class="logo-container svelte-18bsz5t"><div class="logo-badge svelte-18bsz5t"><svg viewBox="0 0 48 48" width="48" height="48" class="svelte-18bsz5t"><path fill="currentColor" d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 26l-4-4-6 6-6-6-4 4-6-6 2-2 14 14 16-16 2 2-10 10z" class="svelte-18bsz5t"></path></svg></div> <h1 class="app-name svelte-18bsz5t">xPEND<span class="app-name-light svelte-18bsz5t">ING</span></h1></div> <p class="welcome-subtitle svelte-18bsz5t">Advanced Financial Intelligence</p></div>'),$s=y('<div class="user-menu svelte-18bsz5t"><button class="user-menu-item svelte-18bsz5t"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true" class="svelte-18bsz5t"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" class="svelte-18bsz5t"></circle><path d="M9.09 9a3 3 0 1 1 5.82 1c-.26.78-.92 1.07-1.82 1.72C12.6 12.88 12 13.5 12 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path><path d="M12 18h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path></svg> Help</button> <button class="user-menu-item svelte-18bsz5t"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="svelte-18bsz5t"><path d="M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path><path d="M16 17L21 12L16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path><path d="M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path></svg> Logout</button></div>'),js=y('<ul class="sub-menu svelte-18bsz5t"><li class="sub-nav-item svelte-18bsz5t"><a href="/budgeting" class="sub-nav-link active svelte-18bsz5t"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="svelte-18bsz5t"><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path></svg> Overview</a></li> <li class="sub-nav-item svelte-18bsz5t"><button class="sub-nav-link svelte-18bsz5t"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="svelte-18bsz5t"><path d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path><path d="M18.5 2.50002C18.8978 2.10218 19.4374 1.87866 20 1.87866C20.5626 1.87866 21.1022 2.10218 21.5 2.50002C21.8978 2.89785 22.1213 3.43738 22.1213 4.00002C22.1213 4.56266 21.8978 5.10218 21.5 5.50002L12 15L8 16L9 12L18.5 2.50002Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path></svg> Edit Categories</button></li></ul>'),Ts=y('<div class="qa-empty svelte-18bsz5t">No templates yet — add one below</div>'),Ds=y('<div class="qa-item svelte-18bsz5t"><div class="qa-info svelte-18bsz5t"><div class="qa-name svelte-18bsz5t"> </div> <div class="qa-meta svelte-18bsz5t"> </div></div> <div class="qa-actions svelte-18bsz5t"><button class="qa-use svelte-18bsz5t" title="Log this transaction">Use</button> <button class="qa-edit svelte-18bsz5t" title="Edit template">✎</button> <button class="qa-del svelte-18bsz5t" title="Remove template">×</button></div></div>'),Hs=y('<option class="svelte-18bsz5t"> </option>'),Ns=y('<option class="svelte-18bsz5t"> </option>'),Bs=y('<option class="svelte-18bsz5t"> </option>'),Is=y('<div class="qa-panel svelte-18bsz5t"><h4 class="svelte-18bsz5t">Quick Templates</h4> <div class="qa-list svelte-18bsz5t"><!></div> <form class="svelte-18bsz5t"><div class="input-group svelte-18bsz5t"><label for="qaName" class="svelte-18bsz5t">Name</label> <input type="text" id="qaName" placeholder="e.g. Daily coffee" required class="svelte-18bsz5t"/></div> <div class="input-group svelte-18bsz5t"><label for="qaAccount" class="svelte-18bsz5t">Account</label> <select id="qaAccount" required class="svelte-18bsz5t"><option class="svelte-18bsz5t">Select account</option><!></select></div> <div class="input-group svelte-18bsz5t"><label for="qaCategory" class="svelte-18bsz5t">Category</label> <select id="qaCategory" required class="svelte-18bsz5t"><option class="svelte-18bsz5t">Select category</option><!></select></div> <div class="input-group svelte-18bsz5t"><label for="qaSubcategory" class="svelte-18bsz5t">Subcategory</label> <select id="qaSubcategory" class="svelte-18bsz5t"><option class="svelte-18bsz5t">Select subcategory</option><!></select></div> <div class="input-group svelte-18bsz5t"><label for="qaAmount" class="svelte-18bsz5t">Amount</label> <input type="number" id="qaAmount" placeholder="Amount" required class="svelte-18bsz5t"/></div> <div class="input-group svelte-18bsz5t"><label for="qaDesc" class="svelte-18bsz5t">Description (optional)</label> <textarea id="qaDesc" placeholder="Description (optional)" class="svelte-18bsz5t"></textarea></div> <div class="qa-form-actions svelte-18bsz5t"><button type="submit" class="svelte-18bsz5t">Save template</button> <button type="button" class="svelte-18bsz5t">Cancel</button></div></form></div>'),Vs=y('<div class="confirm-backdrop svelte-18bsz5t"><div class="confirm-modal svelte-18bsz5t" role="dialog" aria-modal="true"><h3 class="svelte-18bsz5t">Confirm transaction</h3> <p class="confirm-meta svelte-18bsz5t"> </p> <label class="svelte-18bsz5t">Amount</label> <input type="number" class="svelte-18bsz5t"/> <label class="svelte-18bsz5t">Description</label> <input class="svelte-18bsz5t"/> <div class="qa-form-actions svelte-18bsz5t"><button type="submit" class="svelte-18bsz5t">Confirm</button> <button type="button" class="btn-secondary svelte-18bsz5t">Cancel</button></div></div></div>'),Fs=y('<option class="svelte-18bsz5t"> </option>'),Os=y('<option class="svelte-18bsz5t"> </option>'),Us=y('<option class="svelte-18bsz5t"> </option>'),Ps=y('<div class="confirm-backdrop svelte-18bsz5t"><div class="confirm-modal svelte-18bsz5t" role="dialog" aria-modal="true"><h3 class="svelte-18bsz5t">Edit template</h3> <form class="svelte-18bsz5t"><div class="input-group svelte-18bsz5t"><label for="editName" class="svelte-18bsz5t">Name</label> <input id="editName" type="text" required class="svelte-18bsz5t"/></div> <div class="input-group svelte-18bsz5t"><label for="editAccount" class="svelte-18bsz5t">Account</label> <select id="editAccount" required class="svelte-18bsz5t"><option class="svelte-18bsz5t">Select account</option><!></select></div> <div class="input-group svelte-18bsz5t"><label for="editCategory" class="svelte-18bsz5t">Category</label> <select id="editCategory" required class="svelte-18bsz5t"><option class="svelte-18bsz5t">Select category</option><!></select></div> <div class="input-group svelte-18bsz5t"><label for="editSubcategory" class="svelte-18bsz5t">Subcategory</label> <select id="editSubcategory" class="svelte-18bsz5t"><option class="svelte-18bsz5t">Select subcategory</option><!></select></div> <div class="input-group svelte-18bsz5t"><label for="editAmount" class="svelte-18bsz5t">Amount</label> <input id="editAmount" type="number" class="svelte-18bsz5t"/></div> <div class="input-group svelte-18bsz5t"><label for="editDesc" class="svelte-18bsz5t">Description</label> <textarea id="editDesc" class="svelte-18bsz5t"></textarea></div> <div class="qa-form-actions svelte-18bsz5t"><button type="submit" class="svelte-18bsz5t">Save</button> <button type="button" class="btn-secondary svelte-18bsz5t">Cancel</button></div></form></div></div>'),Qs=y('<div><div class="toast-body svelte-18bsz5t"> </div> <button class="close-btn svelte-18bsz5t" aria-label="Dismiss">×</button></div>'),Rs=y('<div class="toasts-container svelte-18bsz5t"></div>'),Zs=y('<div class="particles-container svelte-18bsz5t"></div> <!> <div class="app-container svelte-18bsz5t"><header class="top-bar svelte-18bsz5t"><div class="nav-left svelte-18bsz5t"><button class="menu-button svelte-18bsz5t" aria-label="Toggle menu"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" class="svelte-18bsz5t"><path d="M3 12H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="svelte-18bsz5t"></path><path d="M3 6H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="svelte-18bsz5t"></path><path d="M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="svelte-18bsz5t"></path></svg></button> <h2 class="page-title svelte-18bsz5t">Dashboard</h2></div> <div class="nav-right svelte-18bsz5t"><div class="user-info svelte-18bsz5t" id="user-menu-container"><span class="user-name svelte-18bsz5t"> </span> <div class="user-avatar svelte-18bsz5t" role="button" aria-label="User menu"><svg viewBox="0 0 24 24" fill="none" class="svelte-18bsz5t"><circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2" class="svelte-18bsz5t"></circle><path d="M5 20C5 16.134 8.13401 13 12 13C15.866 13 19 16.134 19 20" stroke="currentColor" stroke-width="2" class="svelte-18bsz5t"></path></svg></div> <!></div></div></header> <nav><div class="nav-header svelte-18bsz5t"><div class="logo-badge small svelte-18bsz5t"><svg viewBox="0 0 48 48" width="24" height="24" class="svelte-18bsz5t"><path fill="currentColor" d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 26l-4-4-6 6-6-6-4 4-6-6 2-2 14 14 16-16 2 2-10 10z" class="svelte-18bsz5t"></path></svg></div> <h3 class="nav-app-name svelte-18bsz5t">xPEND<span class="app-name-light svelte-18bsz5t">ING</span></h3></div> <ul class="nav-menu svelte-18bsz5t"><li><button><div class="nav-link-content svelte-18bsz5t"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="svelte-18bsz5t"><path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path><path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path></svg> Transactions</div> <svg class="chevron svelte-18bsz5t" width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path></svg></button> <!></li> <li class="nav-item svelte-18bsz5t"><a href="/dashboard" class="nav-link svelte-18bsz5t"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="svelte-18bsz5t"><path d="M16 4H21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path><path d="M21 4L14 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path><path d="M4 20L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path><path d="M16 20H21V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path><path d="M4 4H9V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path></svg> Dashboard</a></li></ul> <div class="nav-footer svelte-18bsz5t"><button class="logout-button svelte-18bsz5t"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" class="svelte-18bsz5t"><path d="M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path><path d="M16 17L21 12L16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path><path d="M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-18bsz5t"></path></svg> Logout</button></div></nav> <main class="main-content svelte-18bsz5t"><!></main> <div class="quick-actions svelte-18bsz5t"><button class="qa-fab svelte-18bsz5t" aria-label="Quick actions"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="svelte-18bsz5t"><path d="M12 2L15 9H22L16.5 13L19 20L12 16L5 20L7.5 13L2 9H9L12 2Z" stroke="white" stroke-width="0.8" fill="currentColor" class="svelte-18bsz5t"></path></svg></button> <!></div></div> <!> <!>  <!>',1);function ca(It,st){cs(st,!1);const[bt,Lt]=Ls(),A=()=>Yt(fs,"$currentAccount",bt),E=()=>Yt(zs,"$categories",bt),G=()=>Yt(gs,"$accounts",bt);let H=qs(st,"data",8),te=v(!0),ee=v([]),Mt=v(!1),se=v(!1),W=v(!1),pt=v(!0),mt=v(!1),at=v(""),J=v(null),At=v(""),j=v(null),S=v(null),O=v(null),x=v([]),lt=v([]),Et=v([]);const Le=_s.subscribe(e=>a(Et,e));let Vt=v(!1),ht=v(null),St=v(""),$t=v(null),N=v(null),$=v(null),U=v(null),jt=v(""),w=v([]),ot=v([]);function Me(e){var s;a(ht,e),a(St,e.name),a($t,e.amount),a(N,e.account_id??((s=A())==null?void 0:s.id)??null),a($,e.category??null),a(U,e.subcategory??null),a(jt,e.description??""),a(Vt,!0)}function ae(){a(Vt,!1),a(ht,null)}function Ae(){t(ht)&&(ws(t(ht).id,{name:t(St),amount:t($t)??void 0,account_id:t(N)??null,category:t($)??null,subcategory:t(U)??null,description:t(jt)??null}),ae())}Ct(()=>{var e;if(a(se,window.innerWidth<768),Ee(),(e=H())!=null&&e.accounts&&H().accounts.length)try{rs(()=>import("../chunks/66_NGtvh.js").then(s=>s.m),__vite__mapDeps([0,1,2]),import.meta.url).then(s=>{if(s.accounts.set(H().accounts),H().accounts.length)try{s.currentAccount.set(H().accounts[0])}catch{}}).catch(()=>{Xt()})}catch{Xt()}else Xt();setTimeout(()=>{a(te,!1)},2e3)}),Ct(()=>{var e;a(j,((e=A())==null?void 0:e.id)??null)});function Ee(){a(ee,Array.from({length:20},(e,s)=>({id:s,x:Math.random()*100,y:Math.random()*100,size:Math.random()*3+1,duration:Math.random()*20+10,delay:Math.random()*5})))}function Se(e){t(Mt)?a(Mt,!1):a(Mt,!0)}function $e(){a(W,!t(W))}function je(){a(pt,!t(pt))}function Te(){window.dispatchEvent(new CustomEvent("requestEditCategories"))}function le(e){var s;t(W)&&!((s=document.getElementById("user-menu-container"))!=null&&s.contains(e.target))&&a(W,!1)}Ct(()=>(document.addEventListener("click",le),()=>{document.removeEventListener("click",le)}));async function oe(){try{await fetch("/logout",{method:"POST",credentials:"same-origin"})}catch(e){console.warn("Server logout request failed (continuing):",e)}try{const{error:e}=await Ms.auth.signOut();e&&console.error("Supabase logout error:",e)}catch(e){console.error("Supabase signOut failed:",e)}finally{a(W,!1);try{window.location.replace("/login")}catch{window.location.href="/login"}}}async function De(){a(W,!1);try{window.location.replace("/help")}catch{window.location.href="/help"}}async function He(){var s,n;if(!t(at)||t(J)===null||Number.isNaN(t(J)))return;const e=t(j)??((s=A())==null?void 0:s.id)??null;ks({name:t(at),amount:t(J),account_id:e,description:t(At),category:t(S)??null,subcategory:t(O)??null}),a(at,""),a(J,null),a(At,""),a(j,((n=A())==null?void 0:n.id)??null),a(S,null),a(O,null),a(mt,!1)}async function Ne(e){a(q,e),a(K,e.amount),a(rt,e.description??""),a(Tt,!0)}let B=v([]),Tt=v(!1),q=v(null),K=v(null),rt=v("");async function Be(){if(t(q))try{const e={...t(q),amount:t(K),description:t(rt)},s=await ys(e);window.dispatchEvent(new CustomEvent("transactionCreated",{detail:{amount:t(K),category:t(q).category}}))}catch(e){console.error("Failed to create transaction from confirmed template",e),window.dispatchEvent(new CustomEvent("transactionFailed",{detail:{message:String((e==null?void 0:e.message)??e)}}))}finally{a(Tt,!1),a(q,null),a(K,null),a(rt,"")}}function Ie(){a(Tt,!1),a(q,null),a(K,null),a(rt,"")}function re(e,s="success"){const n=Date.now()+Math.floor(Math.random()*1e3);a(B,[{id:n,message:e,type:s},...t(B)]),setTimeout(()=>{a(B,t(B).filter(i=>i.id!==n))},3200)}function Ve(e){a(B,t(B).filter(s=>s.id!==e))}Ct(()=>{const e=n=>{const i=(n==null?void 0:n.detail)??{},h=i.amount??(i==null?void 0:i.amount)===0?i.amount:null,L=h!=null?`$${Number(h).toFixed(2)}`:"",C=i.category??(i==null?void 0:i.categoryName)??"",M=i.message??`Logged ${L} ${C?`to ${C}`:"transaction"}`.trim();re(M,"success")};window.addEventListener("transactionCreated",e);const s=n=>{var h;const i=((h=n==null?void 0:n.detail)==null?void 0:h.message)??"Failed to log transaction";re(i,"error")};return window.addEventListener("transactionFailed",s),()=>{window.removeEventListener("transactionCreated",e),window.removeEventListener("transactionFailed",s)}}),Ct(()=>()=>{try{Le()}catch{}}),xt(()=>(t(N),A(),t(w),E(),t($)),()=>{t(N)?(A()&&t(N)===A().id?a(w,E()??[]):(async()=>{try{const e=await fetch(`/budgeting/api/user/categories?accountId=${encodeURIComponent(t(N))}`);if(e.ok){const s=await e.json();a(w,Array.isArray(s)?s:[])}else a(w,[])}catch(e){console.warn("Failed to load edit categories for account",t(N),e),a(w,[])}})(),t(w).find(e=>e.name===t($))||a($,null)):(a(w,E()??[]),t(w).find(e=>e.name===t($))||a($,null))}),xt(()=>(t($),t(w),t(ot),t(U)),()=>{if(t($)){const e=t(w).find(s=>s.name===t($));a(ot,e&&Array.isArray(e.subs)?e.subs:[]),t(ot).includes(t(U)||"")||a(U,null)}else a(ot,[])}),xt(()=>(t(j),A(),t(x),E(),t(S)),()=>{t(j)?(A()&&t(j)===A().id?a(x,E()??[]):(async()=>{try{const e=await fetch(`/budgeting/api/user/categories?accountId=${encodeURIComponent(t(j))}`);if(e.ok){const s=await e.json();a(x,Array.isArray(s)?s:[])}else a(x,[])}catch(e){console.warn("Failed to load QA categories for account",t(j),e),a(x,[])}})(),t(x).find(e=>e.name===t(S))||a(S,null)):(a(x,E()??[]),t(x).find(e=>e.name===t(S))||a(S,null))}),xt(()=>(t(S),t(x),t(lt),t(O)),()=>{if(t(S)){const e=t(x).find(s=>s.name===t(S));a(lt,e&&Array.isArray(e.subs)?e.subs:[]),t(lt).includes(t(O)||"")||a(O,null)}else a(lt,[])}),xt(()=>(A(),qe),()=>{A()&&qe()}),vs(),xs();var ne=Zs(),Ft=ye(ne);F(Ft,5,()=>t(ee),e=>e.id,(e,s)=>{var n=Es();f(()=>ps(n,`
        --x: ${t(s),d(()=>t(s).x)??""}%;
        --y: ${t(s),d(()=>t(s).y)??""}%;
        --size: ${t(s),d(()=>t(s).size)??""}px;
        --duration: ${t(s),d(()=>t(s).duration)??""}s;
        --delay: ${t(s),d(()=>t(s).delay)??""}s;
      `)),z(e,n)}),o(Ft);var ie=l(Ft,2);{var Fe=e=>{var s=Ss();qt(2,s,()=>Bt,()=>({y:-50,duration:800,easing:hs})),z(e,s)};R(ie,e=>{t(te)&&e(Fe)})}var Dt=l(ie,2),Ot=r(Dt),Ut=r(Ot),Oe=r(Ut);we(2),o(Ut);var ce=l(Ut,2),ve=r(ce),Pt=r(ve),Ue=r(Pt,!0);o(Pt);var de=l(Pt,2),Pe=l(de,2);{var Qe=e=>{var s=$s(),n=r(s),i=l(n,2);o(s),k("click",n,De),k("click",i,oe),qt(2,s,()=>Bt,()=>({y:10,duration:200})),z(e,s)};R(Pe,e=>{t(W)&&e(Qe)})}o(ve),o(ce),o(Ot);var Ht=l(Ot,2);let ue;var Qt=l(r(Ht),2),Rt=r(Qt),Zt=r(Rt),Re=l(Zt,2);{var Ze=e=>{var s=js(),n=l(r(s),2),i=r(n);o(n),o(s),k("click",i,()=>Te()),qt(3,s,()=>Bt,()=>({y:-10,duration:200})),z(e,s)};R(Re,e=>{t(pt)&&e(Ze)})}o(Rt),we(2),o(Qt);var be=l(Qt,2),Ge=r(be);o(be),o(Ht);var Gt=l(Ht,2),We=r(Gt);As(We,st,"default",{}),o(Gt);var pe=l(Gt,2),me=r(pe),Je=l(me,2);{var Ke=e=>{var s=Is(),n=l(r(s),2),i=r(n);{var h=c=>{var u=Ts();z(c,u)},L=c=>{var u=bs(),_=ye(u);F(_,1,()=>t(Et),V=>V.id,(V,g)=>{var Wt=Ds(),Jt=r(Wt),Kt=r(Jt),ss=r(Kt,!0);o(Kt);var fe=l(Kt,2),as=r(fe);o(fe),o(Jt);var ze=l(Jt,2),ge=r(ze),ke=l(ge,2),ls=l(ke,2);o(ze),o(Wt),f(os=>{D(ss,(t(g),d(()=>t(g).name))),D(as,`$${os??""} · ${t(g),d(()=>t(g).description)??""}`)},[()=>(t(g),d(()=>t(g).amount.toFixed(2)))]),k("click",ge,()=>Ne(t(g))),k("click",ke,()=>Me(t(g))),k("click",ls,()=>Cs(t(g).id)),z(V,Wt)}),z(c,u)};R(i,c=>{t(Et),d(()=>t(Et).length===0)?c(h):c(L,!1)})}o(n);var C=l(n,2),M=r(C),I=l(r(M),2);dt(I),o(M);var X=l(M,2),T=l(r(X),2);f(()=>{t(j),ct(()=>{G()})});var Y=r(T);Y.value=Y.__value="";var _t=l(Y);F(_t,1,G,vt,(c,u)=>{var _=Hs(),V=r(_,!0);o(_);var g={};f(()=>{D(V,(t(u),d(()=>t(u).name))),g!==(g=(t(u),d(()=>t(u).id)))&&(_.value=(_.__value=(t(u),d(()=>t(u).id)))??"")}),z(c,_)}),o(T),o(X);var ft=l(X,2),tt=l(r(ft),2);f(()=>{t(S),ct(()=>{E()})});var P=r(tt);P.value=P.__value="";var zt=l(P);F(zt,1,E,vt,(c,u)=>{var _=Ns(),V=r(_,!0);o(_);var g={};f(()=>{D(V,(t(u),d(()=>t(u).name))),g!==(g=(t(u),d(()=>t(u).name)))&&(_.value=(_.__value=(t(u),d(()=>t(u).name)))??"")}),z(c,_)}),o(tt),o(ft);var gt=l(ft,2),Q=l(r(gt),2);f(()=>{t(O),ct(()=>{t(x),t(lt)})});var nt=r(Q);nt.value=nt.__value="";var kt=l(nt);F(kt,1,()=>t(lt),vt,(c,u)=>{var _=Bs(),V=r(_,!0);o(_);var g={};f(()=>{D(V,t(u)),g!==(g=t(u))&&(_.value=(_.__value=t(u))??"")}),z(c,_)}),o(Q),o(gt);var it=l(gt,2),yt=l(r(it),2);dt(yt),o(it);var wt=l(it,2),b=l(r(wt),2);Ce(b),o(wt);var p=l(wt,2),m=r(p),et=l(m,2);o(p),o(C),o(s),f(()=>{Q.disabled=(t(x),d(()=>!t(x)||t(x).length===0)),m.disabled=!t(at)||t(J)===null}),Z(I,()=>t(at),c=>a(at,c)),ut(T,()=>t(j),c=>a(j,c)),ut(tt,()=>t(S),c=>a(S,c)),ut(Q,()=>t(O),c=>a(O,c)),Z(yt,()=>t(J),c=>a(J,c)),Z(b,()=>t(At),c=>a(At,c)),k("click",et,()=>a(mt,!1)),k("submit",C,xe(He)),qt(2,s,()=>Bt,()=>({y:6,duration:120})),z(e,s)};R(Je,e=>{t(mt)&&e(Ke)})}o(pe),o(Dt);var he=l(Dt,2);{var Xe=e=>{var s=Vs(),n=r(s),i=l(r(n),2),h=r(i);o(i);var L=l(i,4);dt(L);var C=l(L,4);dt(C);var M=l(C,2),I=r(M),X=l(I,2);o(M),o(n),o(s),f(()=>D(h,`${t(q),d(()=>t(q).name)??""} · ${t(q),d(()=>t(q).category)??""}${t(q),d(()=>t(q).subcategory?` / ${t(q).subcategory}`:"")??""}`)),Z(L,()=>t(K),T=>a(K,T)),Z(C,()=>t(rt),T=>a(rt,T)),k("click",I,Be),k("click",X,Ie),z(e,s)};R(he,e=>{t(Tt)&&t(q)&&e(Xe)})}var _e=l(he,2);{var Ye=e=>{var s=Ps(),n=r(s),i=l(r(n),2),h=r(i),L=l(r(h),2);dt(L),o(h);var C=l(h,2),M=l(r(C),2);f(()=>{t(N),ct(()=>{G()})});var I=r(M);I.value=I.__value="";var X=l(I);F(X,1,G,vt,(b,p)=>{var m=Fs(),et=r(m,!0);o(m);var c={};f(()=>{D(et,(t(p),d(()=>t(p).name))),c!==(c=(t(p),d(()=>t(p).id)))&&(m.value=(m.__value=(t(p),d(()=>t(p).id)))??"")}),z(b,m)}),o(M),o(C);var T=l(C,2),Y=l(r(T),2);f(()=>{t($),ct(()=>{t(w)})});var _t=r(Y);_t.value=_t.__value="";var ft=l(_t);F(ft,1,()=>t(w),vt,(b,p)=>{var m=Os(),et=r(m,!0);o(m);var c={};f(()=>{D(et,(t(p),d(()=>t(p).name))),c!==(c=(t(p),d(()=>t(p).name)))&&(m.value=(m.__value=(t(p),d(()=>t(p).name)))??"")}),z(b,m)}),o(Y),o(T);var tt=l(T,2),P=l(r(tt),2);f(()=>{t(U),ct(()=>{t(w),t(ot)})});var zt=r(P);zt.value=zt.__value="";var gt=l(zt);F(gt,1,()=>t(ot),vt,(b,p)=>{var m=Us(),et=r(m,!0);o(m);var c={};f(()=>{D(et,t(p)),c!==(c=t(p))&&(m.value=(m.__value=t(p))??"")}),z(b,m)}),o(P),o(tt);var Q=l(tt,2),nt=l(r(Q),2);dt(nt),o(Q);var kt=l(Q,2),it=l(r(kt),2);Ce(it),o(kt);var yt=l(kt,2),wt=l(r(yt),2);o(yt),o(i),o(n),o(s),f(()=>P.disabled=(t(w),d(()=>!t(w)||t(w).length===0))),Z(L,()=>t(St),b=>a(St,b)),ut(M,()=>t(N),b=>a(N,b)),ut(Y,()=>t($),b=>a($,b)),ut(P,()=>t(U),b=>a(U,b)),Z(nt,()=>t($t),b=>a($t,b)),Z(it,()=>t(jt),b=>a(jt,b)),k("click",wt,ae),k("submit",i,xe(Ae)),z(e,s)};R(_e,e=>{t(Vt)&&t(ht)&&e(Ye)})}var ts=l(_e,2);{var es=e=>{var s=Rs();F(s,5,()=>t(B),n=>n.id,(n,i)=>{var h=Qs(),L=r(h),C=r(L,!0);o(L);var M=l(L,2);o(h),f(()=>{Nt(h,1,`toast ${t(i),d(()=>t(i).type)??""}`,"svelte-18bsz5t"),D(C,(t(i),d(()=>t(i).message)))}),k("click",M,()=>Ve(t(i).id)),z(n,h)}),o(s),z(e,s)};R(ts,e=>{t(B),d(()=>t(B)&&t(B).length)&&e(es)})}f((e,s)=>{D(Ue,e),ue=Nt(Ht,1,"side-nav svelte-18bsz5t",null,ue,s),Nt(Rt,1,`nav-item ${t(pt)?"expanded":""}`,"svelte-18bsz5t"),Nt(Zt,1,`nav-link nav-parent ${t(pt)?"expanded":""}`,"svelte-18bsz5t")},[()=>(us(H()),d(()=>{var e,s;return((s=(e=H().user)==null?void 0:e.email)==null?void 0:s.split("@")[0])??"User"})),()=>({open:t(Mt),mobile:t(se)})]),k("click",Oe,Se),k("click",de,$e),k("click",Zt,je),k("click",Ge,oe),k("click",me,()=>a(mt,!t(mt))),qt(1,Dt,()=>ms,()=>({duration:500})),z(It,ne),ds(),Lt()}export{ca as component};
