const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DAuZG1gl.js","../chunks/D2WH9LUs.js","../chunks/DzjXEilr.js","../chunks/DEf3qtlD.js"])))=>i.map(i=>d[i]);
import{t as q,a as W}from"../chunks/CGPwJ-PK.js";import"../chunks/BqG6SY_L.js";import{p as N,a7 as I,a8 as K,a as Y,g as e,m as E,I as $,b as d,s as w,N as Q,t as U,c as k,Y as X,r as A}from"../chunks/Dmv7ZRbC.js";import{e as G,s as H}from"../chunks/BUKcx96J.js";import{i as J}from"../chunks/Du7F4BbZ.js";import{_ as D}from"../chunks/Dp1pzeXC.js";import{p as j,b as Z}from"../chunks/CJKwoCpU.js";import{o as ee,a as te}from"../chunks/CojLKkpq.js";const C="/assets/outfits",P=[`${C}/tops/top_black.glb`,`${C}/tops/top_grey.glb`],M=[`${C}/bottoms/pants_black.glb`,`${C}/bottoms/pants_grey.glb`];var oe=q('<div class="canvas-container svelte-14k22hh"></div>');function ae(z,T){N(T,!1);let s=j(T,"selectedTop",8,0),i=j(T,"selectedBottom",8,0),r=E(),f,a,o,m,x,t,v=E(),O,y,c,l=E(),b=E();function B(){a.aspect=e(r).clientWidth/e(r).clientHeight,a.updateProjectionMatrix(),o.setSize(e(r).clientWidth,e(r).clientHeight)}async function n(){t=await D(()=>import("../chunks/D2WH9LUs.js"),[],import.meta.url),await(async p=>d(v,p.GLTFLoader))(await D(()=>import("../chunks/DAuZG1gl.js"),__vite__mapDeps([0,1]),import.meta.url)),{OrbitControls:O}=await D(()=>import("../chunks/DzjXEilr.js"),__vite__mapDeps([2,1]),import.meta.url),{RoomEnvironment:y}=await D(()=>import("../chunks/DEf3qtlD.js"),__vite__mapDeps([3,1]),import.meta.url),f=new t.Scene,x=new t.Clock,a=new t.PerspectiveCamera(50,1,.1,100),a.position.set(0,1.5,4),o=new t.WebGLRenderer({antialias:!0}),o.outputEncoding=t.sRGBEncoding,o.toneMapping=t.ACESFilmicToneMapping,o.toneMappingExposure=1.1,o.setClearColor(15790320,1),e(r).appendChild(o.domElement);const u=new t.PMREMGenerator(o);f.environment=u.fromScene(new y,.04).texture,u.dispose(),c=new O(a,o.domElement),c.enableDamping=!0,c.dampingFactor=.1,c.screenSpacePanning=!1,f.add(new t.HemisphereLight(16777215,4473924,.6)),new(e(v))().load(`${C}/base.glb`,p=>{const _=p.scene;f.add(_);const S=new t.Box3().setFromObject(_),h=S.getCenter(new t.Vector3);_.position.sub(h);const L=S.getSize(new t.Vector3).length();a.near=L/100,a.far=L*10,a.updateProjectionMatrix(),a.position.set(h.x,h.y+L*.2,h.z+L*.8),c.target.copy(new t.Vector3(0,L*.1,0)),c.update(),d(l,new t.Group),d(b,new t.Group),_.add(e(l),e(b)),m=new t.AnimationMixer(_),p.animations.length&&m.clipAction(p.animations[0]).play(),R(e(l),P[s()]),R(e(b),M[i()])},void 0,p=>console.error("Base load error",p)),window.addEventListener("resize",B),B()}function g(){requestAnimationFrame(g),m==null||m.update(x.getDelta()),c.update(),o.render(f,a)}async function R(u,V){var p;(p=u.clear)==null||p.call(u);try{const _=await new Promise((S,h)=>new(e(v))().load(V,S,void 0,h));u.add(_.scene)}catch(_){console.error("Clothing load failed",V,_)}}ee(async()=>{await n(),g()}),te(()=>{window.removeEventListener("resize",B),o==null||o.dispose()}),I(()=>(e(v),e(l),$(s())),()=>{e(v)&&e(l)&&R(e(l),P[s()])}),I(()=>(e(v),e(b),$(i())),()=>{e(v)&&e(b)&&R(e(b),M[i()])}),K(),J();var F=oe();Z(F,u=>d(r,u),()=>e(r)),W(z,F),Y()}var ne=q('<h1>ðŸ‘— Outfit Selector</h1> <!> <div class="controls svelte-1ve6p4a"><button class="svelte-1ve6p4a">â—€ Top</button> <span class="svelte-1ve6p4a"> </span> <button class="svelte-1ve6p4a">Top â–¶</button></div> <div class="controls svelte-1ve6p4a"><button class="svelte-1ve6p4a">â—€ Bottom</button> <span class="svelte-1ve6p4a"> </span> <button class="svelte-1ve6p4a">Bottom â–¶</button></div>',1);function ve(z,T){N(T,!1);let s=E(0),i=E(0);const r=(n,g)=>(g-1+n.length)%n.length,f=(n,g)=>(g+1)%n.length;J();var a=ne(),o=w(Q(a),2);ae(o,{get selectedTop(){return e(s)},set selectedTop(n){d(s,n)},get selectedBottom(){return e(i)},set selectedBottom(n){d(i,n)},$$legacy:!0});var m=w(o,2),x=k(m),t=w(x,2),v=k(t,!0);A(t);var O=w(t,2);A(m);var y=w(m,2),c=k(y),l=w(c,2),b=k(l,!0);A(l);var B=w(l,2);A(y),U((n,g)=>{H(v,n),H(b,g)},[()=>P[e(s)].split("/").pop(),()=>M[e(i)].split("/").pop()],X),G("click",x,()=>d(s,r(P,e(s)))),G("click",O,()=>d(s,f(P,e(s)))),G("click",c,()=>d(i,r(M,e(i)))),G("click",B,()=>d(i,f(M,e(i)))),W(z,a),Y()}export{ve as component};
