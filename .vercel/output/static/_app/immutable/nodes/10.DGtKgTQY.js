const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/BpJU_ofz.js","../chunks/PntE9imk.js","../chunks/I7kj631M.js","../chunks/B5bbn9AK.js"])))=>i.map(i=>d[i]);
import"../chunks/Bzak7iHL.js";import"../chunks/B8zN5-cI.js";import{aa as W,ay as $,az as Q,b as q,a as J,ac as K,g as H,a7 as e,af as E,ah as d,ad as w,f as U,ab as X,ae as k,ag as A}from"../chunks/BVWwdZHL.js";import{e as G,s as I}from"../chunks/B8z2uk3R.js";import{i as N}from"../chunks/DiBsknOO.js";import{_ as z}from"../chunks/Dp1pzeXC.js";import{o as Y,a as Z}from"../chunks/Dh_dsFNd.js";import{b as ee}from"../chunks/Bno3tw64.js";import{p as j}from"../chunks/DIjW8BnX.js";const C="/assets/outfits",P=[`${C}/tops/top_black.glb`,`${C}/tops/top_grey.glb`],M=[`${C}/bottoms/pants_black.glb`,`${C}/bottoms/pants_grey.glb`];var te=q('<div class="canvas-container svelte-14k22hh"></div>');function oe(D,T){W(T,!1);let s=j(T,"selectedTop",8,0),i=j(T,"selectedBottom",8,0),r=E(),f,a,o,m,x,t,v=E(),O,y,c,l=E(),b=E();function B(){a.aspect=e(r).clientWidth/e(r).clientHeight,a.updateProjectionMatrix(),o.setSize(e(r).clientWidth,e(r).clientHeight)}async function n(){t=await z(()=>import("../chunks/PntE9imk.js"),[],import.meta.url),await(async p=>{d(v,p.GLTFLoader)})(await z(()=>import("../chunks/BpJU_ofz.js"),__vite__mapDeps([0,1]),import.meta.url)),{OrbitControls:O}=await z(()=>import("../chunks/I7kj631M.js"),__vite__mapDeps([2,1]),import.meta.url),{RoomEnvironment:y}=await z(()=>import("../chunks/B5bbn9AK.js"),__vite__mapDeps([3,1]),import.meta.url),f=new t.Scene,x=new t.Clock,a=new t.PerspectiveCamera(50,1,.1,100),a.position.set(0,1.5,4),o=new t.WebGLRenderer({antialias:!0}),o.outputEncoding=t.sRGBEncoding,o.toneMapping=t.ACESFilmicToneMapping,o.toneMappingExposure=1.1,o.setClearColor(15790320,1),e(r).appendChild(o.domElement);const u=new t.PMREMGenerator(o);f.environment=u.fromScene(new y,.04).texture,u.dispose(),c=new O(a,o.domElement),c.enableDamping=!0,c.dampingFactor=.1,c.screenSpacePanning=!1,f.add(new t.HemisphereLight(16777215,4473924,.6)),new(e(v))().load(`${C}/base.glb`,p=>{const _=p.scene;f.add(_);const S=new t.Box3().setFromObject(_),h=S.getCenter(new t.Vector3);_.position.sub(h);const L=S.getSize(new t.Vector3).length();a.near=L/100,a.far=L*10,a.updateProjectionMatrix(),a.position.set(h.x,h.y+L*.2,h.z+L*.8),c.target.copy(new t.Vector3(0,L*.1,0)),c.update(),d(l,new t.Group),d(b,new t.Group),_.add(e(l),e(b)),m=new t.AnimationMixer(_),p.animations.length&&m.clipAction(p.animations[0]).play(),R(e(l),P[s()]),R(e(b),M[i()])},void 0,p=>console.error("Base load error",p)),window.addEventListener("resize",B),B()}function g(){requestAnimationFrame(g),m==null||m.update(x.getDelta()),c.update(),o.render(f,a)}async function R(u,V){var p;(p=u.clear)==null||p.call(u);try{const _=await new Promise((S,h)=>new(e(v))().load(V,S,void 0,h));u.add(_.scene)}catch(_){console.error("Clothing load failed",V,_)}}Y(async()=>{await n(),g()}),Z(()=>{window.removeEventListener("resize",B),o==null||o.dispose()}),$(()=>(e(v),e(l),H(s())),()=>{e(v)&&e(l)&&R(e(l),P[s()])}),$(()=>(e(v),e(b),H(i())),()=>{e(v)&&e(b)&&R(e(b),M[i()])}),Q(),N();var F=te();ee(F,u=>d(r,u),()=>e(r)),J(D,F),K()}var ae=q('<h1>ðŸ‘— Outfit Selector</h1> <!> <div class="controls svelte-1ve6p4a"><button class="svelte-1ve6p4a">â—€ Top</button> <span class="svelte-1ve6p4a"> </span> <button class="svelte-1ve6p4a">Top â–¶</button></div> <div class="controls svelte-1ve6p4a"><button class="svelte-1ve6p4a">â—€ Bottom</button> <span class="svelte-1ve6p4a"> </span> <button class="svelte-1ve6p4a">Bottom â–¶</button></div>',1);function ve(D,T){W(T,!1);let s=E(0),i=E(0);const r=(n,g)=>(g-1+n.length)%n.length,f=(n,g)=>(g+1)%n.length;N();var a=ae(),o=w(U(a),2);oe(o,{get selectedTop(){return e(s)},set selectedTop(n){d(s,n)},get selectedBottom(){return e(i)},set selectedBottom(n){d(i,n)},$$legacy:!0});var m=w(o,2),x=k(m),t=w(x,2),v=k(t,!0);A(t);var O=w(t,2);A(m);var y=w(m,2),c=k(y),l=w(c,2),b=k(l,!0);A(l);var B=w(l,2);A(y),X((n,g)=>{I(v,n),I(b,g)},[()=>P[e(s)].split("/").pop(),()=>M[e(i)].split("/").pop()]),G("click",x,()=>d(s,r(P,e(s)))),G("click",O,()=>d(s,f(P,e(s)))),G("click",c,()=>d(i,r(M,e(i)))),G("click",B,()=>d(i,f(M,e(i)))),J(D,a),K()}export{ve as component};
